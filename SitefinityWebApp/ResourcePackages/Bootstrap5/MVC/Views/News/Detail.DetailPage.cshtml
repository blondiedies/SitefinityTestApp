@model Telerik.Sitefinity.Frontend.Mvc.Models.ContentDetailsViewModel

@using System;
@using System.Collections;
@using System.Collections.Generic;
@using System.Linq;
@using Telerik.Sitefinity.Modules.Libraries;
@using Telerik.Sitefinity.Libraries.Model;
@using Telerik.Sitefinity;
@using Telerik.Sitefinity.Frontend.Mvc.Helpers;
@using Telerik.Sitefinity.Frontend.Mvc.Models;

@{
    string newsImageUrl = null;
    var newsImageField = Model.Item.Fields.NewsImage;

    // Extraer imagen de artículo
    if (newsImageField != null)
    {
        if (newsImageField is ItemViewModel ivm)
        {
            var inner = ivm.DataItem;
            if (inner != null)
            {
                    newsImageUrl = (inner as dynamic)?.MediaUrl ?? (inner as dynamic)?.Url;
            }
        }
    }
}

<div class="@Model.CssClass" @Html.InlineEditingAttributes(Model.ProviderName, Model.ContentType.FullName, (Guid)Model.Item.Fields.Id)>
    <h1>
        <span @Html.InlineEditingFieldAttributes("Title", "ShortText")>@Model.Item.Fields.Title</span>
    </h1>

    <div class="d-flex gap-3 align-items-center mb-4">
        <span class="text-muted">
            @Model.Item.GetDateTime("PublicationDate", "MMM d, yyyy, HH:mm")
            @Html.Resource("By")
            @Html.Raw(Telerik.Sitefinity.Web.DataResolving.DataResolver.Resolve(Model.Item.DataItem, "Author", null) ?? "")
        </span>

        @Html.CommentsCount(string.Empty, @Model.Item.DataItem)
    </div>

    @if (!string.IsNullOrEmpty(newsImageUrl))
    {
        //renderizar imagen
        <img src="@newsImageUrl" alt="@Model.Item.Fields.Title" class="img-fluid mb-3" />
    }

    <div class="lead mb-3" @Html.InlineEditingFieldAttributes("Summary", "LongText")>@Html.HtmlSanitize((string)Model.Item.Fields.Summary)</div>

    <div @Html.InlineEditingFieldAttributes("Content", "LongText")>@Html.HtmlSanitize((string)Model.Item.Fields.Content)</div>

    @Html.CommentsList(@Model.Item.DataItem)
</div>